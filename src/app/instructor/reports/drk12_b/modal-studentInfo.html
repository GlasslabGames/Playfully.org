<div class="gl-drk12_b-l-overflowhorizontal" ng-controller="Drk12bModalStudentInfo">
    <table class="table gl-reports-table gl-drk12_b-table gl-drk12_b-table-modal" ng-class="{'gl-reports-table--ie': isIE}">
        <thead>
            <tr>
                <th class="bold">
                    <span ng-if="singleUserView">Competency Skill</span>
                    <span ng-if="!singleUserView">Student</span>
                </th>
                <th ng-repeat="mission in studentsArray[0].results.missions" ng-class="{'gl-drk12_b-table-x-disabled': mission.paddingObject && singleUserView}">
                    <div ng-if="mission.current">(current)</div>
                    Mission {{mission.mission}}
                </th>
            </tr>
            <tr>
                <th colspan="{{studentsArray[0].results.missions.length + 1}}" class="gl-reports-divider--blue"></th>
            </tr>
        </thead>
        <tbody>
            <!-- When the modal is opened with a single user -->

            <tr class="gl-reports-table-row" ng-repeat="(skillKey, skill) in skills" ng-if="singleUserView">
                <td>{{skill.name}}</td>
                <td ng-repeat="mission in selectedStudent.results.missions" ng-class="{'gl-drk12_b-table-x-disabled': mission.paddingObject}">
                    <div ng-if="mission.skillLevel[skillKey].level != 'NotAvailable'" class="gl-drk12_b-progressicon gl-drk12_b-progressicon-table"
                         ng-class="{'gl-drk12_b-progressicon-is-disabled': mission.paddingObject, '{{mission.skillLevel.connectingEvidence.level}}': true}"
                         ng-click="navigateToDrilldown(selectedStudent, mission, skillKey)"></div>
                </td>
            </tr>

            <!-- When the modal is opened with multiple users -->

            <tr class="gl-reports-table-row" ng-repeat="student in studentsArray" ng-if="!singleUserView">
                <td>{{student.firstName}} {{student.lastName}}</td>
                <td ng-repeat="mission in student.results.missions" ng-class="{'gl-drk12_b-table-x-disabled': mission.paddingObject}">
                    <div ng-if="mission.skillLevel[selectedSkill].level != 'NotAvailable'" class="gl-drk12_b-progressicon gl-drk12_b-progressicon-table"
                         ng-class="{'gl-drk12_b-progressicon-is-disabled': mission.paddingObject, '{{mission.skillLevel.connectingEvidence.level}}': true}"
                         ng-click="navigateToDrilldown(student, mission, selectedSkill)"></div>
                </td>
            </tr>

        </tbody>
        <tfoot>
            <tr>
                <td colspan="{{studentsArray[0].results.missions.length + 1}}" class="gl-reports-divider--blue"></td>
            </tr>
            <tr ng-if="singleUserView">
                <td>
                    <span class="gl-drk12_b-fraction gl-drk12_b-fraction-legend">
                        <span>Correct</span>
                        <span>Total Attempts</span>
                    </span>
                </td>
                <td ng-repeat="mission in selectedStudent.results.missions" ng-class="{'gl-drk12_b-table-x-disabled': mission.paddingObject}">
                    <span ng-if="! mission.paddingObject" class="gl-drk12_b-fraction">
                        <span>{{mission.totalCorrect}}</span>
                        <span>{{mission.totalAttempts}}</span>
                    </span>
                </td>
            </tr>
        </tfoot>
    </table>
</div>
