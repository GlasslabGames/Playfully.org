<div class="report-body gl-drk12-drillDown-container">
    <h1>{{skills.options[selectedSkill]}}: Mission {{selectedMission.mission}}</h1>
    <div class="gl-drk12-bold">
        <span>{{selectedStudent.firstName}} {{selectedStudent.lastName}}</span><span class="padding-sides-15">|</span>
        <span class="gl-drk12-drillDown-status" ng-class="selectedMission.skillLevel[selectedSkill].level">
            {{(selectedMission.skillLevel[selectedSkill].score.correct / selectedMission.skillLevel[selectedSkill].score.attempts) * 100 | number:0}}<span ng-if="selectedMission.skillLevel[selectedSkill].score.attempts > 0">%</span>
        </span>
    </div>

    <span ng-include="'instructor/reports/drk12_b/drilldownMissionInformationTemplates/mission' + selectedMission.mission + '.html'"></span>

    <div class="gl-drk12-drillDown-skillcard-container">
        <div class="gl-drk12-drillDown-skillcard" ng-repeat="(skillKey, subSkillDetail) in calculdatedDetails">
            <div class="gl-drk12-tableHeader-background gl-drk12-drillDown-skillcard-skillSummary">
                <div class="gl-drk12-drillDown-skillcard-skill">
                    {{subSkillDetail.description}}
                    <img src="/assets/icon-flag.svg" height="16px" width="16px" ng-if="subSkillDetail.criticalQuestionsEnabled === true">
                </div>
                <div ng-if="subSkillDetail.subDescription">({{subSkillDetail.subDescription}})</div>
                <div class="gl-drk12-drillDown-skillcard-successTitle">Success Rate:</div>
                <div class="gl-drk12-drillDown-skillcard-successRate">{{calculateSuccessRate(subSkillDetail.correct, subSkillDetail.attempts)}}</div>
            </div>
            <div class="gl-drk12-drillDown-skillcard-skillDetail">
                <img ng-src="/assets/drk_{{skillKey}}.png" height="82px" width="82px">
                <div class="gl-drk12-drillDown-skillcard-skillDetail-detail" ng-if="!subSkillDetail.locked">
                    Attempts:
                    <div style="margin: 6px 0;">
                        {{subSkillDetail.correct}}
                        <div class="padding-sides-15">/</div>
                        {{subSkillDetail.attempts}}
                    </div>
                    <div>
                        <div>Correct</div>
                        <div style="margin-left: 14px">Total</div>
                    </div>
                </div>
                <div class="gl-drk12-drillDown-skillcard-skillDetail-detail" ng-if="subSkillDetail.locked">
                    <img src="/assets/icon-lock-small.svg" height="32px" width="32px">
                    <div class="font16px">
                        Locked
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!---------------------------------------------- Tables ---------------------------------------------->

    <!-- If skill 1 (Argument Schemes) -->
    <div class="gl-drk12-transcript" ng-if="isFirstSkill()">
        <table class="gl-drk12-singleTable">
            <thead class="gl-drk12-tableHeader-background">
                <tr>
                    <th class="gl-drk12-bold">Argubot Type Used</th>
                    <th class="gl-drk12-bold">Evidence Used</th>
                    <th class="gl-drk12-bold">Success</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList">
                    <td>{{attempt.botType}}</td>
                    <td>{{dataIdToMagicString(attempt.dataId)}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- If skill 2 (Claims and Evidence) -->
    <div class="gl-drk12-transcript" ng-if="isSecondSkill()">
        <table class="gl-drk12-doubleTable">
            <thead class="gl-drk12-tableHeader-background gl-drk12-bold">
                <tr>
                    <th class="gl-drk12-bold">Claim Chosen</th>
                    <th class="gl-drk12-bold">Evidence Chosen</th>
                    <th class="gl-drk12-bold">Success Chosen</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList" ng-if="attempt.attemptType === 'DEFENSE'">
                    <td>{{claimIdToMagicString(attempt.claimId)}}</td>
                    <td>{{dataIdToMagicString(attempt.dataId)}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>

        <table class="gl-drk12-doubleTable">
            <thead class="gl-drk12-tableHeader-background">
                <tr>
                    <th class="gl-drk12-bold">Opponent's Claim Core</th>
                    <th class="gl-drk12-bold">Student Response</th>
                    <th class="gl-drk12-bold">Success</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList" ng-if="attempt.attemptType === 'OFFENSE'">
                    <td>
                        <div>ClaimID: {{claimIdToMagicString(attempt.opponentClaimId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot1DataId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot2DataId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot3DataId)}}</div>
                    </td>
                    <td>{{attackIdToMagicString(attempt.attackId)}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- If skill 3 (Critical Questions) -->
    <div class="gl-drk12-transcript" ng-if="isThirdSkill()">
        <table class="gl-drk12-singleTable">
            <thead class="gl-drk12-tableHeader-background">
                <tr>
                    <th class="gl-drk12-bold">Opposing Argubot</th>
                    <th class="gl-drk12-bold">Opposing Argubot's Claim Core</th>
                    <th class="gl-drk12-bold">Does player have access to matching critical questions?</th>
                    <th class="gl-drk12-bold">Critical Questions Used in Battle</th>
                    <th class="gl-drk12-bold">Success</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList">
                    <td>
                        <div>{{attempt.opponentBot1Name}}</div>
                        <div>{{attempt.opponentBot2Name}}</div>
                        <div>{{attempt.opponentBot3Name}}</div>
                    </td>
                    <td>
                        <div>ClaimID: {{claimIdToMagicString(attempt.opponentClaimId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot1DataId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot2DataId)}}</div>
                        <div>{{dataIdToMagicString(attempt.opponentBot3DataId)}}</div>
                    </td>
                    <td>{{attempt.criticalQuestionsEnabled}}</td>
                    <td>{{attempt.attackId}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- If skill 4 (Backing) -->
    <div class="gl-drk12-transcript" ng-if="isFourthSkill()">
        <table class="gl-drk12-doubleTable">
            <thead class="gl-drk12-tableHeader-background">
                <tr>
                    <th class="gl-drk12-bold">Argubot</th>
                    <th class="gl-drk12-bold">Evidence</th>
                    <th class="gl-drk12-bold">Backing Generated</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList" ng-if="attempt.attemptType === 'DEFENSE'">
                    <td>{{attempt.botType}}</td>
                    <td>{{dataIdToMagicString(attempt.dataId)}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>

        <table class="gl-drk12-doubleTable">
            <thead class="gl-drk12-tableHeader-background">
                <tr>
                    <th class="gl-drk12-bold">Opponent's Critical Question</th>
                    <th class="gl-drk12-bold">Student Backing Used</th>
                    <th class="gl-drk12-bold">Success</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="attempt in selectedMission.skillLevel[selectedSkill].attemptList" ng-if="attempt.attemptType === 'OFFENSE'">
                    <td>{{attackIdToMagicString(attempt.attackId)}}</td>
                    <td>{{dataIdToMagicString(attempt.dataId)}}</td>
                    <td>{{attempt.success}}</td>
                </tr>
                <tr class="no-repeated-tr-content">
                    <td colspan="3">No transcript to show</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="gl-drk12-footerhelper" ng-class="{'expanded': isFooterOpened}" id="reporthelper">
            <button class="gl-drk12-collapsebar" ng-click="footerHelperClicked()" type="button" aria-controls="reporthelper">
            Report Helper <i class="fa" ng-class="{'fa-toggle-down': !isFooterOpened, 'fa-toggle-up': isFooterOpened}"></i>
            <span ng-show="isFooterOpened">
                <a href="javascript:void(0)" ng-click="toggleHelperFullScreen($event)" ng-show="!isFooterFullScreen">Full Screen</a>
                <a href="javascript:void(0)" ng-click="toggleHelperFullScreen($event)" ng-show="isFooterFullScreen">Half Screen</a>
            </span>
        </button>
        <div class="gl-drk12-collapsecontent">
            <div ng-include="'instructor/reports/drk12_b/helperDrawer/helperDrawerWrapper.html'"></div>
        </div>
    </div>
</div>